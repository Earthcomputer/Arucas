// run(getDirectory() + "/src/test/resources/code/test2.arucas");

class Benchmark {
    static var thread = Thread.getCurrentThread();

    static fun average(list) {
        totalCount = len(list);
        totalValue = 0;
        foreach (value : list) totalValue = totalValue + value;
        return totalValue / totalCount;
    }

    static fun valueFunctionCallAvg(value) {
        times = [];
        for (i = 0; i < 5; i++) {
            start = Benchmark.thread.getAge();
            for (i = 0; i < 10000000; i++) value.toString();
            end = Benchmark.thread.getAge();
            times.append(end - start);
        }
        return Benchmark.average(times);
    }
}

class UserClass {
    UserClass() {

    }

    fun toString() {
        return '';
    }
}

delegate = Benchmark.valueFunctionCallAvg;

s = " ms per 10 million iterations";

/*
print(new Test());
print(new Test().toString());
print(Test.benchmark([ 1 ], { 2: 3 }, '4'));
print(new Test().testing([ 5 ], { 6: 7 }, '8'));
*/

print("----------:----------------------------------------------");
print("Test      > %s%s".formatted([delegate(new Test()), s]));
stop();

/*
print("String    > %s%s".formatted([delegate(""), s]));
print("List      > %s%s".formatted([delegate([]), s]));
print("Number    > %s%s".formatted([delegate(0), s]));
print("Null      > %s%s".formatted([delegate(null), s]));
print("Map       > %s%s".formatted([delegate({}), s]));
print("Boolean   > %s%s".formatted([delegate(true), s]));
print("UserClass > %s%s".formatted([delegate(new UserClass()), s]));
*/
